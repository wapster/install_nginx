Установка производилась на только что зарегистрированный VPS от компании FirstByte.

0. Заходим на VPS и обновляем пакеты
```
apt update
```
``` 
apt upgrade 
```

---
Если на VPS стоит старая версия ОС (например, Ubuntu 16.04), то лучшее ее обновить до 20.04
Для этого обновляем список пакетов
```
apt update
```
затем обновляем сами пакеты
```
apt upgrade
```
После его завершения используйте команду `dist-upgrade`, которая выполнит обновления, затрагивающие зависимости пакетов, добавляя или удаляя пакеты при необходимости. В результате могут обновиться пакеты, которые не обновились в результате `apt upgrade`:
```
apt dist-upgrade
```
И уже теперь обновляем дистрибутив
```
do-release-upgrade
```
---

### 1. Создаём пользователя `master` и задаём пароль
```
useradd master
```

```
passwd
```

### 2. Делаем так, чтобы пользователь мог выполнять команды через `sudo`
```
usermod -a -G sudo master
```

### 3. Устанавливаем оболочку по умолчанию (bash)
```
chsh -s /bin/bash master
```
заходим на сервер под новым пользователем (master).

### 4. Устанавливаем Nginx
по статье https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-ubuntu-20-04-ru
```
sudo apt install nginx
```

Перед тестированием Nginx необходимо выполнить настройку программного обеспечения брандмауэра, чтобы разрешить доступ к службе. Nginx регистрирует себя как службу с помощью `ufw` после установки, упрощая доступ к Nginx.

Для вывода списка конфигураций приложений, которые известны `ufw`, необходимо ввести следующую команду:
```
sudo ufw app list
```

UFW (Uncomplicated Firewall или «простой брандмауэр»)

Как показал вывод, есть три профиля, доступных для Nginx:

-   **Nginx Full**: этот профиль открывает порт 80 (обычный веб-трафик без шифрования) и порт 443 (трафик с шифрованием TLS/SSL)
-   **Nginx HTTP**: этот профиль открывает только порт 80 (обычный веб-трафик без шифрования)
-   **Nginx HTTPS**: этот профиль открывает только порт 443 (трафик с шифрованием TLS/SSL)

Рекомендуется применять самый ограничивающий профиль, который будет разрешать заданный трафик. Сейчас нам нужно будет разрешить трафик на порту 80.

Для активации можно ввести следующую команду:
```
sudo ufw allow 'Nginx HTTP'
```

Для проверки изменений введите:
```
sudo ufw status
```
Если что-то пошло не так (появляются ошибки) можно попробовать настроить UFW по этой статье https://www.digitalocean.com/community/tutorials/how-to-set-up-a-firewall-with-ufw-on-ubuntu-18-04-ru

Проверяем работу службы.
```
systemctl status nginx
```

Узнаём свой IP
```
curl -4 icanhazip.com
```

Nginx работает!
```
http://your_server_ip
```
![[4-4 success.jpg]]